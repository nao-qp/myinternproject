<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- Mapperとxmlのマッピング -->
<mapper namespace="overtime.example.repository.RequestMapper">

<!-- 残業申請データ一覧取得 -->
<select id="findMany" resultType="Requests">
	select
		requests.id
		,requests.users_id
		,requests.departments_id
		,requests.work_patterns_id
		,requests.request_date
		,requests.start_time
		,requests.end_time
		,requests.rest_period
		,requests.reason
		,requests.approval_date
		,requests.approval_users_id
		,requests.is_checked
		,requests.approval_status
		,requests.create_date_time
		,requests.update_date_time
		,departments.name as departments_name
		,users.name as users_name
	from
		requests
	left join
		departments
	on
		requests.departments_id = departments.id
	left join
		users
	on
		requests.approval_users_id = users.id
	where
		requests.users_id = #{id}
</select>

<!-- 残業申請データ1件取得 -->
<select id="findOne" resultType="Requests">
	select
		requests.id
		,requests.users_id
		,requests.departments_id
		,requests.work_patterns_id
		,requests.request_date
		,requests.start_time
		,requests.end_time
		,requests.rest_period
		,requests.reason
		,requests.approval_date
		,requests.approval_users_id
		,requests.is_checked
		,requests.approval_status
		,requests.create_date_time
		,requests.update_date_time
		,departments.name as departments_name
		,users.name as approval_users_name
	from
		requests
	left join
		departments
	on
		requests.departments_id = departments.id
	left join
		users
	on
		requests.approval_users_id = users.id
	where
		requests.id = #{id}
</select>



</mapper>



